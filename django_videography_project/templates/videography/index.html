{% extends 'videography/main.html' %}

<!--% load crispy_forms_tags % -->

{% block content %}
    <div id = spinner1 class="container text-center no-display text-primary">
        <br>
        <br>
        <div class="spinner-border align-middle" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
        
    <div id='index-body'>
        <div class="form-group">
            <form action="/videography/" method="post" onsubmit="submittionFunciton()">
                {% csrf_token %}
                <div class='container col-md-6'>
                    <br>
                    <h3>Complete the form below:</h3>
                    <div>
                        {% if error != None %}
                            <br>
                            <p id=errorid class="text-danger">Error: {{error}}. Please Try Again.</p>
                        {% endif %} 
                        {% if message != None %}
                            <br>
                            <p id=messageid class="text-success">Submittion complete. Thank you for providing feedback.</p>
                        {% endif %}
                    </div> 
                    <div id=radiodiv>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="operation" id="flexRadioDefault2"  value="music" checked>
                            <label class="form-check-label" for="flexRadioDefault4">
                                Alignment Tool (Music)
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="operation" id="flexRadioDefault1" value="captions">
                            <label class="form-check-label" for="flexRadioDefault1">
                                YouTube Captions
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="operation" id="flexRadioDefault2" value="lyrics">
                            <label class="form-check-label" for="flexRadioDefault2">
                                Lyric Video Analysis
                            </label>
                        </div>
                    </div>
                    <br>
                    <div id=formid>
                        <div id=artistId>
                            {{ artist_form.as_p }}
                        </div>
                    </div>
                    <input type="submit" value="Submit" id='button1'>
                </div>
            </form>
            
        </div>
    </div>

    <script>

    const spinner = document.getElementById('spinner1');
    const navigationBar = document.getElementById('nav');
    const index = document.getElementById('index-body');

    function unloadFunction(){
        index.classList.remove('no-display')
        navigationBar.classList.remove('no-display')
        spinner.classList.add('no-display')
    }

    const error = document.getElementById('errorid')
    if (error != null){
        const myTimeout = setTimeout(function(){
            error.remove()
        }, 5000);
    };

    function submittionFunciton(){
        index.classList.add('no-display')
        navigationBar.classList.add('no-display')
        spinner.classList.remove('no-display')
    }

    const message = document.getElementById('messageid')
    if (message != null){
        const myTimeout = setTimeout(function(){
            message.remove()
        }, 5000);
    };
    
    </script>

{% endblock content %}
